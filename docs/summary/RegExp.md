---
sidebar: 'auto'
sidebarDepth: 2
---
# js中正则表达式的基本用法和常用匹配汇总

js中正则表达式的基本概念（多看看）

## 1、元字符

元字符:(.,\w,\W,\d,\D,\s,/S,^,$,)

字符|含义
:---: | ---
.|匹配除了换行符以外的任意字符。
\s|代表任意空白符(换行符，制表符，空格)
\S|匹配任意非空字符串
\b|匹配单词边界，匹配单词的开头和结尾。
\B|匹配一个非单词边界
\d|匹配一个数字,等价于[0-9]
\D|匹配一个非数字,等价于[^0-9]
\w|匹配一个单字字符(字母、数字或者下划线)等价于[A-Za-z0-9_],例如, /\w/ 匹配 "apple," 中的 'a'，"$5.28,"中的 '5' 和 "3D." 中的 '3'。 \W匹配一个非单字字符。等价于[^A-Za-z0-9_],例如, /\W/ 或者 /[^A-Za-z0-9_]/ 匹配 "50%." 中的 '%'。
\W|匹配一个非单字字符。等价于[^A-Za-z0-9_],例如, /\W/ 或者 /[^A-Za-z0-9_]/ 匹配 "50%." 中的 '%'。
^|匹配字符串的开始用在[]括号里面表示排除,/^A/ 并不会匹配 "an A" 中的 'A'，但是会匹配 "An E" 中的 'A'。
$|匹配字符串的结束。例如，/t$/ 并不会匹配 "eater" 中的 't'，但是会匹配 "eat" 中的 't'。 QQ号必须为5位到12位数字时，可以使用:^\d{5,12}$

* 我们发现加大写字母都是表示相反的意思。

## 2、分组符

分组符([],(),{})

字符|含义
:---: | ---
()|如果想要重复多个字符该怎么办?你可以用小括号来指定子表达式(也叫做分组)，然后你就可以指定这个子表达式的重复次数了。eg: (\d{1,3}\.){3}\d{1,3}是一个简单的IP地址匹配表达式。要理解这个表达式，请按下列顺序分析它:\d{1,3}匹配1到3位的数字，(\d{1,3}\.){3}匹配三位数字加上一个英文句号(这个整体也就是这个分组)重复3次，最后再加上一个一到三位的数字(\d{1,3})。
[] | 代表一个字符集合。匹配方括号的中任意字符，包括转义序列。你可以使用破折号(-)来指定一个字符范围。对于点(.)和星号(*)这样的殊符号在一个字符集中没有特殊的意义。他们不必进行转义，不过转义也是起作用的。例如，[abcd] 和[a-d]是一样的。他们都匹配"brisket"中得‘b',也都匹配“city”中的‘c'。/[a-z.]+/ 和/[\w.]+/都匹配“test.i.ng”中得所有字符。
{}|表示量词的范围的。

## 3、修饰符

修饰符(i,g,m)

字符|含义
:---: | ---
i|忽略大小写
g|执行全局匹配
m|执行多行匹配

## 4、量词

量词(*,?,+,-,{n,m},?=n,?!=n)

字符|含义
:---: | ---
* | 匹配任意次,.*连在一起就意味着任意数量的不包含换行的字符。等价于{0,}
+ | 匹配前面一个表达式1次或者多次。等价于 {1,}。
? | 匹配前面一个表达式0次或者1次。等价于 {0,1}。
{n,m}|匹配n到m次
x(?=y)|匹配'x'仅仅当'x'后面跟着'y'.这种叫做正向肯定查找。 例如，/Jack(?=Sprat)/会匹配到'Jack'仅仅当它后面跟着'Sprat'。/Jack(?=Sprat|Frost)/匹配‘Jack'仅仅当它后面跟着'Sprat'或者是‘Frost'。但是‘Sprat'和‘Frost'都不是匹配结果的一部分。
x(?!y)|匹配'x'仅仅当'x'后面不跟着'y',这个叫做正向否定查找。 例如，/\d+(?!\.)/匹配一个数字仅仅当这个数字后面没有跟小数点的时候。正则表达式/\d+(?!\.)/.exec("3.141")匹配‘141'但是不是‘3.141'

## 5、关于匹配的贪婪和惰性

所谓的"贪婪"的意思就是，如果符合要求就一直往后匹配，一直到无法匹配为止，这就是贪婪模式。所谓的惰性模式就是一旦匹配到合适的就结束，不在继续匹配下去了。(详细关于贪婪和惰性请看这篇[正则表达式之 贪婪与非贪婪模式详解（概述）](https://www.jb51.net/article/31491.htm))

先说一下贪婪模式的标示符：+，？，*，{n},{n,},{n,m}.和惰性模式：+？，？？，*？？，{n}?，{n,}?,{n,m}?;

```js
var pattern=/8[a-zA-Z0-9]*7/;//贪婪模式
var string="abc8defghij7klngon8qrstwxy7";
```

这时使用了贪婪模式*，表示8与8之间可有有任意多个字母,那这个正则先匹配第一个8，如果匹配到了后，就无限制的匹配后面的内容，只要后面的内容都满足[a-zA-Z0-9]就可以。一直匹配，匹配到不能再匹配为止，看紧接着后面的一个是不是7，如果不是那他就往前进一个(吐出一个看是不是7)，如果不是再继续吐直到吐出7为止，然后匹配到的就是这之间的内容。所以结果匹配到的内容就是整条字符串。

```js
var pattern=/8[a-zA-Z0-9]*?7/ig;//惰性模式
var string="abc8defghij7klngon8qrstwxy7";
```

上面正则使用了惰性模式*?,此时匹配方式是这样的,先匹配一个8，然后在往后匹配一个字符看是不是符合[a-zA-Z0-9]，如果符合，再去看紧接着后面的一个字符是不是7，如果是7就结束，如果不是就再往后匹配一个字符，看是不是符合[a-zA-Z0-9]，如果符合，就再看紧接着后面的一个字符是不是7，如果是7就结束，否则，按照上面的方式依次循环下去,指导符合为止。

## 6、正则的使用方法

方法|使用实例|说明
:---:|:---:|---
search()|var str = "test";var n = str.search(/st/i); //n=>2| 用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。
replace() |var str = "test";var n = str.replace(/st/i,'hello'); //n=>tehello|用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。
test() |/e/.test("test")//=>返回true|用于检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文本，则返回 true，否则返回 false。
exec() |/s/.exec("The best things in life are free!")//=>[ 's',index: 6,input: 'The best things in life are free!',groups: undefined ]| 用于检索字符串中的正则表达式的匹配。该函数返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。
match()|var str = "hello world";var ret = str.match("hello");//(字符串方法，参数可以接收正则表达式)|返回一个数组包含匹配内容的数组(和exec方法类似)

* 此处记住exec()与match()返回类似，但前者是正则的方法包括test(),match()和search()、replace()都是字符串的方法
* replace()方法的第二个参数可以为函数

```js
var sStr='讨论一下正则表达式中的replace的用法';
sStr.replace(/(正则).+?(式)/,function() {
    console.log(arguments);
});
// ["正则表达式", "正则", "式", 4, "讨论一下正则表达式中的replace的用法"]
```

**参数分别为：**

- 匹配到的字符串（此例为"正则表达式")
- 如果正则使用了分组匹配就为多个否则无此参数。（此例的参数就分别为 "正则", "式"）
- 匹配字符串的对应索引位置（也就是"正则表达式"的索引位置，此例为4）
- 原始字符串

如果加上全局标识符g，则是：

```js
var sStr='讨论一下正则表达式中的replace的正则表达式用法';
sStr.replace(/(正则).+?(式)/g,function() {
    console.log(arguments);
});
// ["正则表达式", "正则", "式", 4, "讨论一下正则表达式中的replace的正则表达式用法"]
// ["正则表达式", "正则", "式", 19, "讨论一下正则表达式中的replace的正则表达式用法"]
```

也就是说，arguments是当前函数的内置属性，指代当前匹配的参数伪数组。arguments[0]就是当前匹配的字符串。

eg: 将匹配的字符串添加样式

```js
var highlight = str => `<em class="search-keyword">${str}</em>`;
var regS = new RegExp(keywords, "gi");
match_content = match_content.replace(regS, function (marth_key) {
    return highlight(marth_key)
})
```



## 7、常用的正则的表达式

下面记录一些常用的正则的表达式（markdown表格使用|用\&#124;代替）(部分引用此文章[常用js正则表达大全](https://www.cnblogs.com/my-effort/p/6306706.html))

### 7.1、校验数字的js正则表达式

匹配项|表达式
:---:|:---:
数字|^[0-9]*$
n位的数字|^\d{n}$
至少n位的数字|^\d{n,}$
m-n位的数字|^\d{m,n}$
零和非零开头的数字|^(0&#124;[1-9][0-9]*)$
非零开头的最多带两位小数的数字|^([1-9][0-9]*)+(.[0-9]{1,2})?$
带1-2位小数的正数或负数|^(\\-)?\d+(\\.\d{1,2})?$
正数、负数、和小数|^(\\-&#124;\\+)?\d+(\\.\d+)?$
有两位小数的正实数|^[0-9]+(.[0-9]{2})?$
有1~3位小数的正实数|^[0-9]+(.[0-9]{1,3})?$
非零的正整数|^[1-9]\d*$ 或 ^([1-9][0-9]\*){1,3}$ 或 ^\+?[1-9][0-9]*$
非零的负整数|^\\-[1-9][]0-9"*$ 或 ^-[1-9]\d\*$
非负整数|^\d+$ 或 ^[1-9]\d*&#124;0$
非正整数|^-[1-9]\d*&#124;0$ 或 ^((-\d+)&#124;(0+))$
非负浮点数|^\d+(\\.\d+)?$ 或 ^[1-9]\d*\\.\d*&#124;0\\.\d*[1-9]\d*&#124;0?\\.0+&#124;0$
非正浮点数|^((-\d+(\\.\d+)?)&#124;(0+(\\.0+)?))$ 或 ^(-([1-9]\d*\\.\d*&#124;0\\.\d*[1-9]\d*))&#124;0?\\.0+&#124;0$
正浮点数|^[1-9]\d*\\.\d*&#124;0\\.\d*[1-9]\d*$ 或 ^(([0-9]+\\.[0-9]\*[1-9][0-9]\*)&#124;([0-9]\*[1-9][0-9]\*\\.[0-9]+)&#124;([0-9]\*[1-9][0-9]\*))$
负浮点数|^-([1-9]\d*\\.\d*&#124;0\\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\\.[0-9]\*[1-9][0-9]\*)&#124;([0-9]\*[1-9][0-9]\*\\.[0-9]+)&#124;([0-9]\*[1-9][0-9]\*)))$
浮点数|^(-?\d+)(\\.\d+)?$ 或 ^-?([1-9]\d*\\.\d*&#124;0\\.\d*[1-9]\d*&#124;0?\\.0+&#124;0)$

### 7.2、校验字符的js正则表达式

匹配项|表达式
:---:|:---:
汉字|^[\u4e00-\u9fa5]{0,}$
英文和数字|^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$
长度为3-20的所有字符|^.{3,20}$
由26个英文字母组成的字符串|^[A-Za-z]+$
由26个大写英文字母组成的字符串|^[A-Z]+$
由26个小写英文字母组成的字符串|^[a-z]+$
由数字和26个英文字母组成的字符串|^[A-Za-z0-9]+$
由数字、26个英文字母或者下划线组成的字符串|^\w+$ 或 ^\w{3,20}$
中文、英文、数字包括下划线|^[\u4E00-\u9FA5A-Za-z0-9_]+$
中文、英文、数字但不包括下划线等符号|^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$
可以输入含有^%&',;=?$\"等字符|[^%&',;=?$\x22]+
禁止输入含有~的字符|[^~\x22]+

### 7.3、特殊需求js正则表达式

匹配项|表达式
:---:|:---:
Email邮箱地址|^\w+([-+.]\w+)\*@\w+([-.]\w+)\*\\.\w+([-.]\w+)*$  或  /^[A-Za-z0-9._%-]+@([A-Za-z0-9-]+\\.)+[A-Za-z]{2,4}$/
url域名|[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?
InternetURL|[a-zA-z]+://[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]*)?$
手机号码|^(13[0-9]&#124;14[5&#124;7]&#124;15[0&#124;1&#124;2&#124;3&#124;5&#124;6&#124;7&#124;8&#124;9]&#124;18[0&#124;1&#124;2&#124;3&#124;5&#124;6&#124;7&#124;8&#124;9])\d{8}$  或：/^1[3&#124;4&#124;5&#124;7&#124;8]\d{9}$/
电话号码("XXX-XXXXXXX"、"XXXX-XXXXXXXX"、"XXX-XXXXXXX"、"XXX-XXXXXXXX"、"XXXXXXX"和"XXXXXXXX)|^(\\(\d{3,4}-)&#124;\d{3.4}-)?\d{7,8}$
国内电话号码(0511-4405222、021-87888822)|\d{3}-\d{8}&#124;\d{4}-\d{7}
15或18位身份证|^\d{15}&#124;\d{18}$
15位身份证|^[1-9]\d{7}((0\d)&#124;(1[0-2]))(([0&#124;1&#124;2]\d)&#124;3[0-1])\d{3}$
18位身份证|^[1-9]\d{5}[1-9]\d{3}((0\d)&#124;(1[0-2]))(([0&#124;1&#124;2]\d)&#124;3[0-1])\d{4}$
短身份证号码(数字、字母x结尾)|^([0-9]){7,18}(x&#124;X)?$ 或 ^\d{8,18}&#124;[0-9x]{8,18}&#124;[0-9X]{8,18}?$
帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)|^[a-zA-Z][a-zA-Z0-9_]{4,15}$
密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)|^[a-zA-Z]\w{5,17}$
强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)|^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$  
日期格式|^\d{4}-\d{1,2}-\d{1,2}(简单的格式判断)
复杂的日期格式判断|^(?: (?!0000)[0-9]{4}-(?: (?:0[1-9]&#124;1[0-2])-(?:0[1-9]&#124;1[0-9]&#124;2[0-8])&#124;(?:0[13-9]&#124;1[0-2])-(?:29&#124;30)&#124;(?:0[13578]&#124;1[02])-31)&#124;(?:[0-9]{2}(?:0[48]&#124;[2468][048]&#124;[13579][26])&#124;(?:0[48]&#124;[2468][048]&#124;[13579][26])00)-02-29)$  (使用时注意将: 和()中间的空格删除)
一年的12个月(01～09和1～12)|^(0?[1-9]&#124;1[0-2])$
一个月的31天(01～09和1～31)|^((0?[1-9])&#124;((1&#124;2)[0-9])&#124;30&#124;31)$
xml文件|^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x&#124;X][m&#124;M][l&#124;L]$
中文字符的正则表达式|[\u4e00-\u9fa5]
双字节字符|[^\x00-\xff]    (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))
空白行的正则表达式|\n\s*\r    (可以用来删除空白行)
HTML标记的正则表达式|<(\S*?)[^>]*>.*?</\1>&#124;<.*? />    (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)
首尾空白字符的正则表达式|^\s*&#124;\s*$或(^\s*)&#124;(\s*$)    (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)
腾讯QQ号|[1-9][0-9]{4,}    (腾讯QQ号从10000开始)
中国邮政编码|[1-9]\d{5}(?!\d)    (中国邮政编码为6位数字)
IP地址|\d+\.\d+\.\d+\.\d+    (提取IP地址时有用)
IPv4地址|^(?: (?:25[0-5]&#124;2[0-4][0-9]&#124;[01]?[0-9][0-9]?)\.){3}(?:25[0-5]&#124;2[0-4][0-9]&#124;[01]?[0-9][0-9]?)$   (使用时注意将: 和()中间的空格删除)
不能为空|/\S/
匹配空行|^(\s*)\n
微信号|^[a-zA-Z]\([-_a-zA-Z0-9]{5,19})+$
车牌号|^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$
十六进制的颜色|^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$

<comments />